{% extends "header.html" %}
{% block content %}



<div class="container" >
  <div class="row">
    <div class="col-lg">
    </div>
    <div class="col-lg text-center">
      {% with flash_messages = get_flashed_messages() %}
        {% if flash_messages %}
          {% for message in flash_messages %}
            <div class="alert alert-danger" role="alert">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}    
    </div>
    <div class="col-lg text-center">
    </div>
  </div>

  <div class="row" >
    <div class="col-lg-2"></div>
      <div class="col-lg-8">
<!--       {% if project %}    DEBUG
        <label> Your project: {{project}}</label>
      {% endif %} -->



        <form method="POST" action="{{ url_for('projectBP.update') }}" enctype=multipart/form-data>        
          <div class="modal-content borderless shadowed">
            <div class="modal-header project-header" style="background-image: url(https://storage.googleapis.com/fevici.appspot.com/{{coverid}});">
              <div class="intro-header"><h3>Tu proyecto! &#128640;</h3></div>
         
              <!-- <button class="change-picture"><i class="fa fa-camera"></i></button> -->
              <!-- <div class="change-picture"><a href=""><i class="fa fa-camera"></i></a></div> -->
              
              <label class="change-picture">
                <input type="file" name="thumbnail" id="thumbnail" title="thumbnail"  placeholder="" /><i class="fa fa-camera"><span id="thumb" ></span></i>
              </label>

              <script type="text/javascript">
                $("#thumbnail").on("change", function(){
                // Name of file and placeholder
                var file = this.files[0].name;
                var dflt = "";
                if($(this).val()!=""){
                  try{
                    newfile = file.slice(0,5) + '...' +file.slice(file.length-7)
                    document.getElementById("thumb").classList.add("description");
                    $("#thumb").text(newfile);
                  }catch(err){
                    $("#thumb").text(file);  
                  }
                  
                } 
              });
              </script>                   
            </div>
            <div class="modal-header">
              <h8 class="modal-title" id="exampleModalLabel">Esta parte del proyecto ayuda a los jueces a entenderlo mejor así que por favor se breve y específico.<br><br>Puedes guardar tu progreso y regresar las veces que necesites, antes de la fecha límite</h7>
            </div>     

            <div class="modal-header" style="display: inline-block;">
              <div class="row">
                <div class="col-sm-6">
                  <div class="label" style="padding-bottom: 10px;">Tu equipo</div>
                  {% for person in team_list %}
                    <span class="tooltip_container">
                      <div class="tooltip">
                        <button type="button" onclick="" class="teammate" style="background-color: {{person.color}}">{{person.initials}}</button>
                        <span class="tooltiptext">{{person.name}}<br>{{person.email}}</span>
                      </div>
                    </span>
                  {% endfor %}





                  <div class="tooltip">
                    
                    <a href="" data-modal="#modal2" class="modal__trigger">Modal 2</a>
                    <span class="tooltiptext">Invitar más personas al equipo (Max 5)</span>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="label">Proyecto Público</div>
                  <div class="custom-control custom-checkbox mr-sm-2">
                    <input name="PublicProject" type="checkbox" class="custom-control-input {% if project['PublicProject'] == 'on' %} checked {% endif %} " id="PublicProject">
                    <label class="custom-control-label" for="PublicProject">Deseas que tu proyecto sea visible por los demás participantes?</label>
                  </div>  
                </div>
              </div>
            </div>
              <!-- Modal for Share  -->
              <style> 
                  .input-icons i { 
                      position: absolute;                       
                      color: #b0b0b0;
                  }.input-icons i:hover{
                    background-color:#b0b0b0;
                    color: white; 
                  }
                    
                  .input-icons { 
                      text-align: right;
                      padding-right: 40px;
                      width: 100%; 
                      margin-bottom: 10px; 
                  } 
                    
                  .icon { 
                      padding: 10px; 
                      min-width: 40px; 
                  } 
                    
                  .input-field { 
                      width: 100%; 
                  } 

                  .modal-content{

                  }

                  .modal-backdrop{
                    display: none;
                  }

                  .custom-modal{
                    border:none;
                    background-color: #ffffffe3;
                    z-index: 1040 !important;
                    box-shadow: 5px 5px 10px lightgrey;
                    border-radius: 10px;
                    top: 50px;                    
                  }
              </style>              



















              <style type="text/css">
* {
  box-sizing: border-box;
}
body {
  line-height: 1.5;
  font-family: 'Lato';
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}
h1,
h2,
h3,
p {
  font-weight: 300;
  margin: 0 0 2.4rem 0;
}
h1,
h2,
h3 {
  line-height: 1.3;
}
a {
  text-decoration: none;
  color: inherit;
  font-weight: 400;
}
/**
 * Material Modal CSS
 */
.modal {
  will-change: visibility, opacity;
  display: -webkit-box;
  display: flex;
  -webkit-box-align: center;
          align-items: center;
  -webkit-box-pack: center;
          justify-content: center;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  overflow-x: hidden;
  z-index: 1000;
  visibility: hidden;
  opacity: 0;
  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  -webkit-transition-delay: $modal-delay;
          transition-delay: $modal-delay;
}
.modal--active {
  visibility: visible;
  opacity: 1;
}
.modal--align-top {
  -webkit-box-align: start;
          align-items: flex-start;
}
.modal__bg {
  background: transparent;
}
.modal__dialog {
  max-width: 600px;
  padding: 1.2rem;
}
.modal__content {
  will-change: transform, opacity;
  position: relative;
  padding: 2.4rem;
  background: #ffebee;
  background-clip: padding-box;
  box-shadow: 0 12px 15px 0 rgba(0,0,0,0.25);
  opacity: 0;
  -webkit-transition: all 0.25s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.25s cubic-bezier(0.23, 1, 0.32, 1);
}
.modal__content--active {
  opacity: 1;
}
.modal__close {
  z-index: 1100;
  cursor: pointer;
}
.modal__trigger {
  position: relative;
  display: inline-block;
  padding: 1.2rem 2.4rem;
  color: rgba(0,0,0,0.7);
  line-height: 1;
  cursor: pointer;
  background: #ffebee;
  box-shadow: 0 2px 5px 0 rgba(0,0,0,0.26);
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}
.modal__trigger--active {
  z-index: 10;
}
.modal__trigger:hover {
  background: #e5d3d6;
}
#modal__temp {
  will-change: transform, opacity;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #ffebee;
  -webkit-transform: none;
          transform: none;
  opacity: 1;
  -webkit-transition: opacity 0.1s ease-out, -webkit-transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: opacity 0.1s ease-out, -webkit-transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: opacity 0.1s ease-out, transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: opacity 0.1s ease-out, transform 0.5s cubic-bezier(0.23, 1, 0.32, 1), -webkit-transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}
/**
 * Demo specific CSS
 */
body {
  height: 100vh;
  background: #f44336;
}
img {
  max-width: 100%;
}
.demo-btns header {
  padding: 7vh 10vw;
  background: #ffebee;
  display: -webkit-box;
  display: flex;
  -webkit-box-align: center;
          align-items: center;
}
.demo-btns header h1 {
  margin: 0;
  color: rgba(0,0,0,0.54);
  font-weight: 300;
}
.demo-btns .info {
  background: #f44336;
  padding: 3vh 10vw;
  height: 70vh;
  display: -webkit-box;
  display: flex;
  -webkit-box-align: center;
          align-items: center;
  -webkit-box-pack: center;
          justify-content: center;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
          flex-flow: column wrap;
}
.demo-btns p {
  text-align: center;
  color: #fff;
}
.demo-btns .link {
  font-size: 20px;
}
.demo-btns .modal__trigger {
  margin-right: 3px;
}
@media (max-width: 640px) {
  .demo-btns .modal__trigger {
    margin-bottom: 0.8rem;
  }
}
.demo-close {
  position: absolute;
  top: 0;
  right: 0;
  margin: 1.2rem;
  padding: 0.6rem;
  background: rgba(0,0,0,0.3);
  border-radius: 50%;
  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}
.demo-close svg {
  width: 24px;
  fill: #fff;
  pointer-events: none;
  vertical-align: top;
}
.demo-close:hover {
  background: rgba(0,0,0,0.6);
}
.logo {
  position: fixed;
  bottom: 3vh;
  right: 3vw;
  z-index: 2;
}
.logo img {
  width: 45px;
  -webkit-transform: rotate(0);
          transform: rotate(0);
  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}
.logo img:hover {
  -webkit-transform: rotate(180deg) scale(1.1);
          transform: rotate(180deg) scale(1.1);
}
                
              </style>

  <div id="modal2" class="modal modal--align-top modal__bg" role="dialog" aria-hidden="true">
    <div class="modal__dialog">
      <div class="modal__content">
        <h1>Big Modal</h1>
        <h3>This modal is pretty tall.</h3>
        <p>Selfies normcore four dollar toast four loko listicle artisan. Hoodie Marfa authentic, wayfarers church-key tofu Banksy pop-up Kickstarter Brooklyn heirloom swag synth. Echo Park cray synth mixtape. Tofu gastropub squid readymade, trust fund Wes Anderson DIY PBR 8-bit try-hard +1 Shoreditch lo-fi tote bag.</p>
        <p><img src="http://unsplash.it/600/300" alt="" /></p>
        <p>Mumblecore cred selfies fingerstache. Tousled skateboard plaid lo-fi shabby chic salvia, swag Odd Future Etsy art party Austin cronut. Crucifix whatever Pinterest food truck, pickled viral cray 90's DIY chambray keffiyeh biodiesel Vice blog. Cred meh yr tofu.</p>
        <p>Mumblecore cred selfies fingerstache. Tousled skateboard plaid lo-fi shabby chic salvia, swag Odd Future Etsy art party Austin cronut. Crucifix whatever Pinterest food truck, pickled viral cray 90's DIY chambray keffiyeh biodiesel Vice blog. Cred meh yr tofu.</p>
        <!-- modal close button -->
        <a href="" class="modal__close demo-close">
          <svg class="" viewBox="0 0 24 24"><path d="M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"/><path d="M0 0h24v24h-24z" fill="none"/></svg>
        </a>
      </div>
    </div>
  </div>
             
              <div class="modal  shadowed " id="inviteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog custom-modal" role="document">
                  
                  <div class="modal-content "  id="supermodal" >
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Invitar al equipo</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body mx-3">
                        <div class="md-form">

                            <label class="my-1 mr-2" for="code">Código de equipo</label>
                            <div class="input-icons" >
                              <i class="fa fa-copy icon" onclick="copy()" id="copied"></i> 
                              <input name="userEmail" id ="code" value ="124355" placeholder="124355" type="readonly" autofocus class="form-control input-field" readonly>
                            </div>
                            <br>
                            <label class="my-1 mr-2" for="invitation">Enviar invitación por correo?</label>
                            <input name="userPassword" id="invitation" placeholder="miembro@correo.com" class="form-control">
                          </div>              
                        <br>          
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                      <button type="button" onclick="sendMail()" id = "sendmail" class="btn btn-success">Enviar</button>
                    </div>
                  </div>
                  
                </div>
              </div>




























              <div class="alert alert-warning alert-dismissible fade show" role="alert">
                El <strong>{{limit}}</strong> cierra la edición de proyectos!
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>               

              {% if status=="Success" %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                  Guardado Exitosamente!
                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>  
              {% elif status  %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                  {{status}}
                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>  
              {% endif %}

            <div class="modal-body mx-3">
                <div class="md-form">
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Categoria</label>
                    <select name = "category" class="custom-select my-1 mr-sm-2" onclick="getIndex()" id="cat">
                      {% if project['Category']|length > 0 %}
                        <option selected>{{project['Category']}}</option>
                      {% else %}
                        <option selected>Ingresa Valor...</option>
                      {% endif %}
                      <option value="Areas prioritarias">Areas prioritarias</option>
                      <option value="Físico-Matemáticas y Ciencias de la Tierra">Físico-Matemáticas y Ciencias de la Tierra</option>                      
                      <option value="Biología y Química">Biología y Química</option>
                      <option value="Medicina y Ciencias de la Salud">Medicina y Ciencias de la Salud</option>
                      <option value="Humanidades y ciencias de la conducta">Humanidades y ciencias de la conducta</option>
                      <option value="Ciencias Sociales">Ciencias Sociales</option>
                      <option value="Biotecnología y Ciencias Agropecuarias">Biotecnología y Ciencias Agropecuarias</option>
                      <option value="Ingenierías">Ingenierías</option>
                    </select>

                    <br><br>
                    <label class="my-1 mr-2" disabled="disabled" for="inlineFormCustomSelectPref">Subcategoría</label>
                    <select name = "subcategory"  class="custom-select my-1 mr-sm-2 readonly" id="subcat">
                      {% if project['Category']|length > 0 %}
                        <option selected>{{project['Subcategory']}}</option>
                      {% else %}
                        <option selected>Elegir categoría primero...</option>
                      {% endif %}
                      <!-- <option value="1">Three</option> EJEMPLO DE COMO SE INSERTAN LAS OPCIONES CON JS-->
                    </select>

                    <br><br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Resumen del proyecto   *No más de 250 palabras</label>

                      {% if project['Abstract']|length > 0 %}
                        <input name="abstract" placeholder="{{project['Abstract']}}" value="{{project['Abstract']}}" type="text" autofocus class="form-control">
                      {% else %}
                        <input name="abstract" placeholder="Breve resumen de tu proyecto" value="{{project['Abstract']}}" type="text" autofocus class="form-control">
                      {% endif %}

                    <br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Sobre el autor o autores</label>
                      {% if project['Author']|length > 0 %}
                        <input name="author" placeholder="{{project['Author']}}" value = "{{project['Author']}} "type="text" autofocus class="form-control">
                      {% else %}
                        <input name="author" placeholder="Cuéntamos más sobre ti" value="{{project['Author']}}" type="text" autofocus class="form-control">
                      {% endif %}

                      <br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Pregunta/Propuesta</label>
                      {% if project['Proposal']|length > 0 %}
                        <input name="proposal" placeholder="{{project['Proposal']}}" value="{{project['Proposal']}}" type="text" autofocus class="form-control">
                      {% else %}
                        <input name="proposal" placeholder="Cuál es tu pregunta o propuesta?" value="{{project['Proposal']}}" type="text" autofocus class="form-control">
                      {% endif %}

                    <br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Investigación </label>
                      {% if project['Research']|length > 0 %}
                        <input name="research" placeholder="{{project['Research']}}" value="{{project['Research']}}" type="text" autofocus class="form-control">
                      {% else %}
                        <input name="research" placeholder="Tu investigación" value="{{project['Research']}}" type="text" autofocus class="form-control">
                      {% endif %}

                    <br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Método/Prueba y rediseño</label>
                      {% if project['Method']|length > 0 %}
                        <input name="method" placeholder="{{project['Method']}}" value="{{project['Method']}}" type="text" autofocus class="form-control">
                      {% else %}
                        <input name="method" placeholder="Tu método/Rediseño" value="{{project['Method']}}"  type="text" autofocus class="form-control">
                      {% endif %}


                    <br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Resultados</label>
                      {% if project['Results']|length > 0 %}
                        <input name="results" placeholder="{{project['Results']}}" value="{{project['Results']}}"  type="text" autofocus class="form-control">
                      {% else %}
                        <input name="results" placeholder="Qué resultados obtuviste?" value="{{project['Results']}}" type="text" autofocus class="form-control">
                      {% endif %}

                    <br>
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Conclusión o Reporte</label>
                      {% if project['Conclusion']|length > 0 %}
                        <input name="conclusion" placeholder="{{project['Conclusion']}}" value="{{project['Conclusion']}}" type="text" autofocus class="form-control">
                      {% else %}
                        <input name="conclusion" placeholder="A qué conclusión llegaste?" value="{{project['Conclusion']}}" type="text" autofocus class="form-control">
                      {% endif %}


                    <br>
                    <div class="custom-control custom-checkbox mr-sm-2">
                      <input type="checkbox" class="custom-control-input" id="Materials" onclick="checkMaterials()">
                      <label class="custom-control-label" for="Materials">Utilizaste Materiales Químicos durante tu experimento?</label>
                    </div>                      

                    <div style="display: none" id="invisible">
                      <br>
                      <div class="container">
                        <div class="row">
                          <div class="col-lg-1"></div>
                          <div class="col-lg">Fierros</div>
                          <div class="col-lg-1"></div>
                        </div>
                      </div>
                    </div>


                    <br> 
                    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Bibliografía, referencias y agradecimientos</label>
                      {% if project['Biblio']|length > 0 %}
                        <input name="biblio" placeholder="{{project['Biblio']}}" value="{{project['Biblio']}}" type="text" autofocus class="form-control">
                      {% else %}
                        <input name="biblio" placeholder="Donde citas tu trabajo?" value="{{project['Biblio']}}" type="text" autofocus class="form-control">
                      {% endif %}

                    <br>
                    <div class="container">
                      <label class="my-1 mr-2" for="inlineFormCustomSelectPref">Sube tu proyecto en PDF por este medio</label>
                      <div class="row">
                        

<style type="text/css">
    .upload {
    --background: #F9F8FF;
    --text-drop: #CAC8CA;
    --text-upload: #2D2C2F;
    --progress-color: #E7E5E7;
    --check-color: var(--text-upload);
    --border-radius: 10px;
    border-radius: 10px;
    border: dotted lightgrey;
    width: 100%;
    height: 100px;
    position: relative;
    display: -webkit-box;
    display: flex;
    -webkit-box-pack: center;
            justify-content: center;
    -webkit-box-align: center;
            align-items: center;
  }
  .upload::before {
    content: "";
    display: block;
    width: 100%;
    height: 100%;
    background: var(--background);
    border-radius: var(--border-radius);
    -webkit-transition: all .3s ease-out;
    transition: all .3s ease-out;
    box-shadow: var(--shadow-x, 0px) var(--shadow-y, 1px) var(--shadow-blur, 3px) rgba(0, 0, 0, 0.1);
    -webkit-transform: scale(var(--scale, 1));
            transform: scale(var(--scale, 1));
  }
  .upload .drop-here {
    position: absolute;
    width: 100%;
    
    outline: none;
    border-radius: var(--border-radius);
    opacity: var(--opacity, 0);
    overflow: hidden;
    cursor: pointer;
    text-indent: -9999px;
    z-index: 1;
  }
  .upload .text {
    position: absolute;
    font-size: 21px;
    text-transform: uppercase;
    letter-spacing: 2px;
    font-weight: bold;
  }
  .upload .text.text-drop {
    color: var(--text-drop);
    opacity: var(--opacity, 1);
    -webkit-transition: opacity .15s ease-out .15s;
    transition: opacity .15s ease-out .15s;
  }
  .upload .text.text-upload {
    color: var(--text-upload);
    opacity: var(--opacity, 0);
    -webkit-transition: opacity .15s ease-out;
    transition: opacity .15s ease-out;
  }
  .upload .progress-wrapper {
    position: absolute;
  }
  .upload .progress-wrapper .progress {
    fill: none;
    stroke: var(--progress-color);
    stroke-width: 3;
    stroke-dasharray: 722;
    stroke-dashoffset: 722;
  }
  .upload .check-wrapper {
    position: absolute;
    opacity: var(--opacity, 0);
    -webkit-transform: scale(var(--scale, 0.9)) rotate(var(--rotate, 3deg));
            transform: scale(var(--scale, 0.9)) rotate(var(--rotate, 3deg));
    -webkit-transition: opacity .15s ease-in, -webkit-transform .15s ease-in-out;
    transition: opacity .15s ease-in, -webkit-transform .15s ease-in-out;
    transition: transform .15s ease-in-out, opacity .15s ease-in;
    transition: transform .15s ease-in-out, opacity .15s ease-in, -webkit-transform .15s ease-in-out;
  }
  .upload .check-wrapper .check {
    width: 100px;
    width: 100px;
    fill: none;
    background-clip: red;
    stroke: #8fffdf; /*Color paloma*/
    stroke-width: 5;
    stroke-dasharray: 50 0;
    stroke-dashoffset: 50;
  }
  .upload .shadow {
    opacity: var(--opacity, 0);
    overflow: hidden;
    position: absolute;
    height: 100%;
    width: 100%;
    border-radius: var(--border-radius);
    -webkit-filter: blur(25px);
            filter: blur(25px);
    z-index: -1;
    -webkit-transition: all .5s ease;
    transition: all .5s ease;
  }
  .upload .shadow::before {
    content: '';
    position: absolute;
    top: -25%;
    left: -25%;
    height: 150%;
    width: 150%;
    background: conic-gradient(#4b82d4, #6a29e9, #4b82d4, #6a29e9, #c58357, #FFC940, #4b82d4);
    -webkit-animation: shadow-animate 5s linear infinite;
            animation: shadow-animate 5s linear infinite;
  }
  .upload.drag {
    --scale: 1.03;
    --shadow-y: 5px;
    --shadow-blur: 20px;
  }
  .upload.drop .text.text-drop {
    --opacity: 0;
    -webkit-transition: opacity .15s ease-out;
    transition: opacity .15s ease-out;
  }
  .upload.drop .text.text-upload {
    --opacity: 1;
    -webkit-transition: opacity .15s ease-out .15s;
    transition: opacity .15s ease-out .15s;
  }
  .upload.drop .shadow {
    --opacity: 1;
  }
  .upload.drop .progress-wrapper {
    opacity: var(--opacity, 1);
    -webkit-transform: scale(var(--scale, 1)) rotate(var(--rotate, -90deg));
            transform: scale(var(--scale, 1)) rotate(var(--rotate, -90deg));
  }
  .upload.drop .progress-wrapper .progress {
    -webkit-animation: progress-animate 3s ease .3s forwards;
            animation: progress-animate 3s ease .3s forwards;
  }
  .upload.done {
    --opacity: 0.5;
    top: 50%;
  }
  .upload.done .text.text-upload {
    --opacity: 0;
  }
  .upload.done .shadow {
    --opacity: 0;
  }
  .upload.done .progress-wrapper {
    --scale: .95;
    -webkit-transition: opacity .3s, -webkit-transform .3s;
    transition: opacity .3s, -webkit-transform .3s;
    transition: transform .3s, opacity .3s;
    transition: transform .3s, opacity .3s, -webkit-transform .3s;
  }
  .upload.done .check-wrapper {
    --opacity: 1;
    --scale: 1;
    --rotate: 0deg;
    -webkit-transition: opacity .5s ease-in .3s, -webkit-transform .5s ease-in-out .3s;
    transition: opacity .5s ease-in .3s, -webkit-transform .5s ease-in-out .3s;
    transition: transform .5s ease-in-out .3s, opacity .5s ease-in .3s;
    transition: transform .5s ease-in-out .3s, opacity .5s ease-in .3s, -webkit-transform .5s ease-in-out .3s;
  }
  .upload.done .check-wrapper .check {
    -webkit-animation: check-animate .5s ease-in-out .3s forwards;
            animation: check-animate .5s ease-in-out .3s forwards;
  }

  @-webkit-keyframes shadow-animate {
    0% {
      -webkit-transform: rotate(0deg);
              transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
              transform: rotate(360deg);
    }
  }

  @keyframes shadow-animate {
    0% {
      -webkit-transform: rotate(0deg);
              transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
              transform: rotate(360deg);
    }
  }
  @-webkit-keyframes progress-animate {
    0% {
      stroke-dashoffset: 722;
    }
    20% {
      stroke-dashoffset: 500;
    }
    50% {
      stroke-dashoffset: 322;
    }
    55% {
      stroke-dashoffset: 300;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }
  @keyframes progress-animate {
    0% {
      stroke-dashoffset: 722;
    }
    20% {
      stroke-dashoffset: 500;
    }
    50% {
      stroke-dashoffset: 322;
    }
    55% {
      stroke-dashoffset: 300;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }
  @-webkit-keyframes check-animate {
    0% {
      stroke-dasharray: 0 100;
      stroke-dashoffset: 0;
    }
    100% {
      stroke-dasharray: 100 0;
      stroke-dashoffset: 100;
    }
  }
  @keyframes check-animate {
    0% {
      stroke-dasharray: 0 100;
      stroke-dashoffset: 0;
    }
    100% {
      stroke-dasharray: 100 0;
      stroke-dashoffset: 100;
    }
  }

  body .socials {
    position: fixed;
    display: block;
    left: 20px;
    bottom: 20px;
  }
  body .socials > a {
    display: block;
    width: 30px;
    opacity: .2;
    -webkit-transform: scale(var(--scale, 0.8));
            transform: scale(var(--scale, 0.8));
    -webkit-transition: -webkit-transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91);
    transition: -webkit-transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91);
    transition: transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91);
    transition: transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91), -webkit-transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91);
  }
  body .socials > a:hover {
    --scale: 1;
  }
</style>   



<div class="upload">

  <input type="file" name="file" title="file" class="drop-here">
  {%if proj_file['project_name'] != '' %}
    <div class="text text-drop">{{proj_file['project_name']}}</div>
  {%else%}
    <div class="text text-drop">Soltar archivo aqui</div>
  {%endif%}
  <div class="text text-upload">Cargando...</div>
  <svg class="progress-wrapper" width="50" height="50">
    <circle class="progress" r="115" cx="150" cy="150"></circle>
  </svg>
  <svg class="check-wrapper" width="130" height="130">
    <polyline class="check" points="100.2,40.2 51.5,88.8 29.8,67.5 "/>
  </svg>
  <div class="shadow"></div>
</div>




<!--- ## DRIBBBLE + TWITTER ############# -->
<!-- <div class="socials">
  <a class="dribbble" href="https://dribbble.com/shots/8571590-Upload-Animation" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" fill="black" d="M16 0C7.16703 0 0 7.16703 0 16C0 24.833 7.16703 32 16 32C24.8156 32 32 24.833 32 16C32 7.16703 24.8156 0 16 0ZM26.5683 7.37527C28.4772 9.70065 29.6226 12.6681 29.6573 15.8785C29.2061 15.7918 24.6941 14.872 20.1475 15.4447C20.0434 15.2191 19.9566 14.9761 19.8525 14.7332C19.5748 14.0738 19.2625 13.397 18.9501 12.7549C23.9826 10.7072 26.2733 7.75705 26.5683 7.37527ZM16 2.36009C19.4707 2.36009 22.6464 3.66161 25.0586 5.7961C24.8156 6.14317 22.7505 8.90239 17.8915 10.7245C15.6529 6.61171 13.1714 3.24512 12.7896 2.72451C13.8134 2.48156 14.8894 2.36009 16 2.36009ZM10.1866 3.64425C10.551 4.13015 12.9805 7.5141 15.2538 11.5401C8.86768 13.2408 3.22777 13.2061 2.62039 13.2061C3.50542 8.9718 6.36876 5.44902 10.1866 3.64425ZM2.32538 16.0174C2.32538 15.8785 2.32538 15.7397 2.32538 15.6009C2.9154 15.6182 9.54447 15.705 16.3644 13.6573C16.7636 14.4208 17.128 15.2017 17.4751 15.9826C17.3015 16.0347 17.1106 16.0868 16.9371 16.1388C9.89154 18.4121 6.14317 24.6247 5.8308 25.1453C3.6616 22.7332 2.32538 19.5228 2.32538 16.0174ZM16 29.6746C12.8416 29.6746 9.92625 28.5987 7.61822 26.7939C7.86117 26.2907 10.6377 20.9458 18.3427 18.256C18.3774 18.2386 18.3948 18.2386 18.4295 18.2213C20.3557 23.2017 21.1367 27.3839 21.3449 28.5813C19.6963 29.2928 17.8915 29.6746 16 29.6746ZM23.6182 27.3319C23.4794 26.4989 22.7505 22.5076 20.9631 17.5965C25.2495 16.9197 28.9978 18.0304 29.4664 18.1866C28.8764 21.987 26.6898 25.2668 23.6182 27.3319Z" fill="#EA4C89"></path></svg></a>
</div> -->
<script type="text/javascript">
  var fileUpload = document.querySelector(".upload");

fileUpload.addEventListener("dragover", function() {
  this.classList.add("drag");
  this.classList.remove("drop", "done");
});

fileUpload.addEventListener("dragleave", function() {
  this.classList.remove("drag");
});

fileUpload.addEventListener("drop", start, false);
fileUpload.addEventListener("change", start, false);

function start() { 
  this.classList.remove("drag");
  this.classList.add("drop");
  setTimeout(() => this.classList.add("done"), 3000);
}
</script>
                        </div>
                      </div>

                    <!-- PRUEBA                   
                    <br>
                    <input name="userPassword" placeholder="Your Password"  type="password" class="form-control">
                      -->                

                  </div>              
                <br>          
            </div>
            <div class="modal-footer">
              <button onclick="cancel()" type="button" class="btn btn-secondary mr-auto" id="cancel-button" data-dismiss="modal">Salir</button>
              {% if status=="Success" %}
                <button onclick="validate()" type="submit" href="/update" class="btn btn-success " id="save_button">Guardar de nuevo?</button>
              {% elif status != None %}
                <button onclick="validate()" type="submit" href="/update" class="btn btn-warning " id="save_button">No se guardó, intentar de nuevo?</button>
              {% else %}
                <button onclick="validate()" type="submit" href="/update" class="btn btn-primary " id="save_button">Guardar</button>
              {% endif %}
              
            </div>



          </div>
        </form>

      </div>
    <div class="col-lg-2"></div>

  </div>

<script type="text/javascript">

//var strUser = e.options[e.selectedIndex].value;  
function invite(){
  document.getElementById("supermodal").style.backdropFilter = "";
  // $("#invite_button").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>');
}
function validate(){
  $("#save_button").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Guardando ...');
}

function cancel(){
  $("#cancel-button").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Saliendo ...');
  fetch("/")
    .then((data) => {
      console.log(data);
      window.location = data['url'];
    },
      (error) => {
        console.log(error);
        $("#cancel").html("Error.");
      });
}


prioritatias = ["COVID-19","Medio Ambiente","Conservación Ambiental","Salud","Alimentación","Oportunidades Laborales"]
ciencias = ["Ciencia de los Materiales","Ciencias Terrestres y Ambientales","Física y Astronomía","Matemáticas","Energía Química","Energía Física"]
biologias = ["Biología Celular y Molecular","Bioquímica","Química"]
medicas = ["Ciencias Biomédicas y de la Salud","Ciencia Medica Traslacional","Neurociencias"]
humanidades = ["Historia"]
csociales = ["Comportamiento y Ciencia Sociales","Psicología Social","Psicología Clínica"]
biotech = ["Biología Computacional y Bioinformatica","Ciencias Animales","Ciencias de las Plantas"]
ingenierias = ["Ingeniería Ambiental","Ingeniería Biomédica","Robótica y Máquinas Inteligentes","Sistemas de Software","Sistemas Embedidos"]

function createCats(array){
  var id = "subcat";
  var sel = document.getElementById(id);
  while(sel.hasChildNodes()){
    sel.removeChild(sel.firstChild);   
  }
  
  for (index = 0; index < array.length; index++) { 
    var opt = document.createElement('option');
    opt.appendChild( document.createTextNode(array[index]) );
    opt.value = array[index]; 
    sel.appendChild(opt);   
  } 
}

function getIndex(){
  var e = document.getElementById("cat").selectedIndex;
  if (e===1){
    createCats(prioritatias);
  }if (e===2){
    createCats(ciencias);
  }if (e===3){
    createCats(biologias);
  }if (e===4){
    createCats(medicas);
  }if (e===5){
    createCats(humanidades);
  }if (e===6){
    createCats(csociales);
  }if (e===7){
    createCats(biotech);
  }if (e===8){
    createCats(ingenierias);
  }

  console.log(e);
}

function checkMaterials(){
  if (document.getElementById('Materials').checked){
    document.getElementById('invisible').style.display = 'inline';
  }else{
    document.getElementById('invisible').style.display = 'none';
  }
}

function copy() {
  /* Get the text field */
  var copyText = document.getElementById("code");

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /*For mobile devices*/

  /* Copy the text inside the text field */
  document.execCommand("copy");

  /* Alert the copied text */
  element = document.getElementById('copied').classList;
  element.remove('fa-copy');
  element.add('fa-check');

  
}
function validateEmail(email) {
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}

function sendMail(){
  mailto = document.getElementById("invitation").value;
  $("#sendmail").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Enviando ...');
  if (validateEmail(mailto)){
    fetch("/send_invite/"+mailto)
      .then((data) => {
        console.log(data);
        $("#sendmail").html('Enviado');
        document.getElementById("sendmail").style.backgroundColor = "#67FBD1 "
        document.getElementById("sendmail").style.color = "#2B2B2B "        
        // window.location = data['url'];
      },
        (error) => {
          console.log(error);
          $("#sendmail").html("Error.");
        }
      );  
  }
  else{
    $("#sendmail").html("Correo Inválido");
    document.getElementById("sendmail").style.backgroundColor = "#DF4550 "
    document.getElementById("sendmail").style.color = "#fff "
  }
}












// MODAL PART

var Modal = (function() {

  var trigger = $qsa('.modal__trigger'); // what you click to activate the modal
  var modals = $qsa('.modal'); // the entire modal (takes up entire window)
  var modalsbg = $qsa('.modal__bg'); // the entire modal (takes up entire window)
  var content = $qsa('.modal__content'); // the inner content of the modal
  var closers = $qsa('.modal__close'); // an element used to close the modal
  var w = window;
  var isOpen = false;
  var contentDelay = 400; // duration after you click the button and wait for the content to show
  var len = trigger.length;

  // make it easier for yourself by not having to type as much to select an element
  function $qsa(el) {
    return document.querySelectorAll(el);
  }

  var getId = function(event) {

    event.preventDefault();
    var self = this;
    // get the value of the data-modal attribute from the button
    var modalId = self.dataset.modal;
    var len = modalId.length;
    // remove the '#' from the string
    var modalIdTrimmed = modalId.substring(1, len);
    // select the modal we want to activate
    var modal = document.getElementById(modalIdTrimmed);
    // execute function that creates the temporary expanding div
    makeDiv(self, modal);
  };

  var makeDiv = function(self, modal) {

    var fakediv = document.getElementById('modal__temp');

    /**
     * if there isn't a 'fakediv', create one and append it to the button that was
     * clicked. after that execute the function 'moveTrig' which handles the animations.
     */

    if (fakediv === null) {
      var div = document.createElement('div');
      div.id = 'modal__temp';
      self.appendChild(div);
      moveTrig(self, modal, div);
    }
  };

  var moveTrig = function(trig, modal, div) {
    var trigProps = trig.getBoundingClientRect();
    var m = modal;
    var mProps = m.querySelector('.modal__content').getBoundingClientRect();
    var transX, transY, scaleX, scaleY;
    var xc = w.innerWidth / 2;
    var yc = w.innerHeight / 2;

    // this class increases z-index value so the button goes overtop the other buttons
    trig.classList.add('modal__trigger--active');

    // these values are used for scale the temporary div to the same size as the modal
    scaleX = mProps.width / trigProps.width;
    scaleY = mProps.height / trigProps.height;

    scaleX = scaleX.toFixed(3); // round to 3 decimal places
    scaleY = scaleY.toFixed(3);


    // these values are used to move the button to the center of the window
    transX = Math.round(xc - trigProps.left - trigProps.width / 2);
    transY = Math.round(yc - trigProps.top - trigProps.height / 2);

    // if the modal is aligned to the top then move the button to the center-y of the modal instead of the window
    if (m.classList.contains('modal--align-top')) {
      transY = Math.round(mProps.height / 2 + mProps.top - trigProps.top - trigProps.height / 2);
    }


    // translate button to center of screen
    trig.style.transform = 'translate(' + transX + 'px, ' + transY + 'px)';
    trig.style.webkitTransform = 'translate(' + transX + 'px, ' + transY + 'px)';
    // expand temporary div to the same size as the modal
    div.style.transform = 'scale(' + scaleX + ',' + scaleY + ')';
    div.style.webkitTransform = 'scale(' + scaleX + ',' + scaleY + ')';


    window.setTimeout(function() {
      window.requestAnimationFrame(function() {
        open(m, div);
      });
    }, contentDelay);

  };

  var open = function(m, div) {

    if (!isOpen) {
      // select the content inside the modal
      var content = m.querySelector('.modal__content');
      // reveal the modal
      m.classList.add('modal--active');
      // reveal the modal content
      content.classList.add('modal__content--active');

      /**
       * when the modal content is finished transitioning, fadeout the temporary
       * expanding div so when the window resizes it isn't visible ( it doesn't
       * move with the window).
       */

      content.addEventListener('transitionend', hideDiv, false);

      isOpen = true;
    }

    function hideDiv() {
      // fadeout div so that it can't be seen when the window is resized
      div.style.opacity = '0';
      content.removeEventListener('transitionend', hideDiv, false);
    }
  };

  var close = function(event) {

    event.preventDefault();
    event.stopImmediatePropagation();

    var target = event.target;
    var div = document.getElementById('modal__temp');

    /**
     * make sure the modal__bg or modal__close was clicked, we don't want to be able to click
     * inside the modal and have it close.
     */

    if (isOpen && target.classList.contains('modal__bg') || target.classList.contains('modal__close')) {

      // make the hidden div visible again and remove the transforms so it scales back to its original size
      div.style.opacity = '1';
      div.removeAttribute('style');

      /**
      * iterate through the modals and modal contents and triggers to remove their active classes.
      * remove the inline css from the trigger to move it back into its original position.
      */

      for (var i = 0; i < len; i++) {
        modals[i].classList.remove('modal--active');
        content[i].classList.remove('modal__content--active');
        trigger[i].style.transform = 'none';
        trigger[i].style.webkitTransform = 'none';
        trigger[i].classList.remove('modal__trigger--active');
      }

      // when the temporary div is opacity:1 again, we want to remove it from the dom
      div.addEventListener('transitionend', removeDiv, false);

      isOpen = false;

    }

    function removeDiv() {
      setTimeout(function() {
        window.requestAnimationFrame(function() {
          // remove the temp div from the dom with a slight delay so the animation looks good
          div.remove();
        });
      }, contentDelay - 50);
    }

  };

  var bindActions = function() {
    for (var i = 0; i < len; i++) {
      trigger[i].addEventListener('click', getId, false);
      closers[i].addEventListener('click', close, false);
      modalsbg[i].addEventListener('click', close, false);
    }
  };

  var init = function() {
    bindActions();
  };

  return {
    init: init
  };

}());

Modal.init();



</script>
  <!-- Ettrics -->
  <a href="https://ettrics.com/" class="logo" target="_blank">
   <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/45226/ettrics-logo.svg" alt="" /> 
  </a>
</div>
{% endblock %}
